{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\a-pol\\\\CoHelper\\\\src\\\\components\\\\HomePage\\\\Elements\\\\CardItem.js\";\nimport React from \"react\";\nimport { Button } from \"../../Button.js\";\nimport firebase from \"firebase\";\n\nfunction CardItem(props) {\n  const db = firebase.firestore();\n  const userToken = localStorage.getItem(\"token\");\n\n  async function handleClick() {\n    const userFrom = await db.collection(\"order\").where(\"from\", \"==\", userToken).get();\n    let isNotExist = true;\n    userFrom.forEach(doc => {\n      if (doc.data().to === props.id) {\n        isNotExist = false;\n      }\n    });\n\n    if (isNotExist) {\n      const userTo = await db.collection(\"order\").where(\"to\", \"==\", userToken).get();\n      let notConfirm = true;\n      userTo.forEach(doc => {\n        if (doc.data().from === props.id) {\n          db.collection(\"order\").add({\n            from: userToken,\n            status: 1,\n            to: props.id\n          }); //if 1 to both user\n          // db.collection(\"order\").doc(props.id).set({\n          //   status:1\n          // });\n\n          notConfirm = false;\n        }\n      });\n\n      if (notConfirm) {\n        db.collection(\"order\").add({\n          from: userToken,\n          status: 0,\n          to: props.id\n        });\n      }\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"card-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cards__item__link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"figure\", {\n    className: \"company_name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 15\n    }\n  }, props.name))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cards__item__info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"activity\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, \"\\u0420\\u043E\\u0434 \\u0434\\u0435\\u044F\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438: \", props.activity), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: `mailto:${props.email}?subject=%D0%A1%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D1%81%D1%82%D0%B2%D0%BE%20CoHelper`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 15\n    }\n  }, props.email)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"city\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, \"\\u0413\\u043E\\u0440\\u043E\\u0434: \", props.city), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"findFor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, \"\\u0418\\u0449\\u0435\\u0442: \", props.findFor)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"conf_btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"btns\",\n    buttonStyle: \"btn--test\",\n    buttonSize: \"btn--large\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \"\\u0421\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u0447\\u0430\\u0442\\u044C\")))));\n}\n\nexport default CardItem;","map":{"version":3,"sources":["C:/Users/a-pol/CoHelper/src/components/HomePage/Elements/CardItem.js"],"names":["React","Button","firebase","CardItem","props","db","firestore","userToken","localStorage","getItem","handleClick","userFrom","collection","where","get","isNotExist","forEach","doc","data","to","id","userTo","notConfirm","from","add","status","name","activity","email","city","findFor"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Button } from \"../../Button.js\";\r\nimport firebase from \"firebase\";\r\n\r\nfunction CardItem(props) {\r\n  const db = firebase.firestore();\r\n  const userToken = localStorage.getItem(\"token\");\r\n  async function handleClick() {\r\n    const userFrom = await db.collection(\"order\").where(\"from\",\"==\",userToken).get()\r\n    let isNotExist=true;\r\n    userFrom.forEach((doc)=>{\r\n      if (doc.data().to===props.id){\r\n        isNotExist=false;\r\n      }\r\n    });\r\n    if(isNotExist){\r\n      const userTo = await db.collection(\"order\").where(\"to\",\"==\",userToken).get()\r\n      let notConfirm=true;\r\n      userTo.forEach((doc)=>{if (doc.data().from===props.id){\r\n        db.collection(\"order\").add({\r\n          from: userToken,\r\n          status: 1,\r\n          to: props.id,\r\n        });\r\n        //if 1 to both user\r\n        // db.collection(\"order\").doc(props.id).set({\r\n        //   status:1\r\n        // });\r\n        notConfirm=false;\r\n      }});\r\n      if(notConfirm){\r\n        db.collection(\"order\").add({\r\n          from: userToken,\r\n          status: 0,\r\n          to: props.id,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <li className=\"card-form\">\r\n        <div className=\"cards__item__link\">\r\n          <figure className=\"company_name\">\r\n            <div>\r\n              <p>{props.name}</p>\r\n            </div>\r\n          </figure>\r\n          <div className=\"cards__item__info\">\r\n            <h5 className=\"activity\">Род деятельности: {props.activity}</h5>\r\n            <p className=\"email\">\r\n              <a\r\n                href={`mailto:${props.email}?subject=%D0%A1%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D1%81%D1%82%D0%B2%D0%BE%20CoHelper`}\r\n              >\r\n                {props.email}\r\n              </a>\r\n            </p>\r\n            <p className=\"city\">Город: {props.city}</p>\r\n            <p className=\"findFor\">Ищет: {props.findFor}</p>\r\n          </div>\r\n          <div className=\"conf_btn\">\r\n            <Button\r\n              className=\"btns\"\r\n              buttonStyle=\"btn--test\"\r\n              buttonSize=\"btn--large\"\r\n              onClick={handleClick}\r\n            >\r\n              Сотрудничать\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </li>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CardItem;\r\n"]},"metadata":{},"sourceType":"module"}